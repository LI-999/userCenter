# å…ˆå®Œæˆå†å®Œç¾

# ç”¨æˆ·ä¸­å¿ƒé¡¹ç›®

## ä¼ä¸šåšé¡¹ç›®æµç¨‹

éœ€æ±‚åˆ†æ -ã€‹è®¾è®¡(ç®€è¦è®¾è®¡ï¼Œæ¦‚è¦è®¾è®¡ç­‰) -ã€‹æŠ€æœ¯é€‰å‹ -ã€‹åˆå§‹åŒ–/å¼•å…¥éœ€è¦çš„æŠ€æœ¯ -ã€‹å†™demoæµ‹è¯•ç¯å¢ƒ -ã€‹ç¼–å†™ä»£ç ï¼ˆå®ç°ä¸šåŠ¡é€»è¾‘ï¼‰ -ã€‹å•å…ƒæµ‹è¯• -ã€‹ä»£ç æäº¤/ä»£ç è¯„å®¡ -ã€‹éƒ¨ç½² -ã€‹ä¸Šçº¿



# å¼€å‘æµç¨‹(åç«¯ä¸ºä¸»)

* å‰ç«¯åˆå§‹åŒ–
* åç«¯åˆå§‹åŒ–
  * æ‰‹åŠ¨å¯¼å…¥mybatis plusä¾èµ– å¹¶æµ‹è¯•
* æ•°æ®åº“è®¾è®¡(æ•´ä¸ªæ•°æ®åº“å°±ä¸€å¼ è¡¨)
  * è®¾ç½®ç”¨æˆ·è¡¨
* åç«¯è‡ªåŠ¨ä»£ç ç”Ÿæˆå™¨ æ’ä»¶mybatisx
* å®ç°æ³¨å†Œä¸šåŠ¡
* å®ç°ç™»å½•ä¸šåŠ¡
* å®ç°ç™»å‡ºä¸šåŠ¡







## ç¯å¢ƒ

* nodejs 14+ 
  æ¢æº 

  ```node
  é˜¿é‡Œ
  npm config set registry http://registry.npmmirror.com
  ```

  

# å¤šç¯å¢ƒ

[å‚è€ƒæ–‡æ¡£][https://blog.csdn.net/weixin_41701290/article/details/120173283?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522a6097e1780fe92ba592094074af19b3d%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&request_id=a6097e1780fe92ba592094074af19b3d&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-1-120173283-null-null.nonecase&utm_term=%E5%A4%9A%E7%8E%AF%E5%A2%83&spm=1018.2226.3001.4450]

æœ¬åœ°å¼€å‘ï¼šlocalhost

å¤šç¯å¢ƒï¼šæŒ‡åŒä¸€å¥—é¡¹ç›®åœ¨ä¸åŒçš„é˜¶æ®µéœ€è¦æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´é…ç½®å¹¶éƒ¨ç½²åœ¨ä¸åŒçš„æœºå™¨ä¸Š

ä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ

1. æ¯ä¸ªç¯å¢ƒä¹‹é—´äº’ä¸å½±å“
2. åŒºåˆ†ä¸åŒçš„é˜¶æ®µï¼šå¼€å‘/æµ‹è¯•/ç”Ÿäº§
3. å¯¹é¡¹ç›®è¿›è¡Œä¼˜åŒ–ï¼š
   1. æœ¬åœ°æ—¥å¿—çº§åˆ« (é˜²æ­¢ç»™ç”¨æˆ·æš´éœ²è¿‡å¤šçš„ä¿¡æ¯)
   2. ç²¾ç®€ä¾èµ–ï¼ŒèŠ‚çœé¡¹ç›®ä½“ç§¯
   3. é¡¹ç›®çš„ç¯å¢ƒ/å‚æ•°å¯ä»¥è°ƒæ•´ å¦‚JVMå‚æ•° ğŸŒ€

é’ˆå¯¹ä¸åŒçš„ç¯å¢ƒåšä¸åŒçš„äº‹æƒ…



å¤šç¯å¢ƒåˆ†ç±»ï¼š

1. æœ¬åœ°ç¯å¢ƒï¼š(è‡ªå·±çš„ç”µè„‘) localhost
2. å¼€å‘ç¯å¢ƒï¼š(è¿œç¨‹å¼€å‘)å¤§å®¶è¿åŒä¸€å°æœºå™¨ï¼Œä¸ºäº†å¤§å®¶å¼€å‘æ–¹ä¾¿
3. æµ‹è¯•ç¯å¢ƒï¼š(æµ‹è¯•)å¼€å‘/æµ‹è¯•/äº§å“ï¼Œå•å…ƒæµ‹è¯•/æ€§èƒ½æµ‹è¯•/åŠŸèƒ½æµ‹è¯•/ç³»ç»Ÿé›†æˆæµ‹è¯•(æµ‹è¯•ä¸€ç³»åˆ—åŠŸèƒ½æµ‹è¯•) ç‹¬ç«‹çš„æ•°æ®åº“ã€ç‹¬ç«‹çš„æœåŠ¡å™¨
   1. æ²™ç®±ç¯å¢ƒï¼ˆå®éªŒç¯å¢ƒï¼‰å¤§å…¬å¸æ‰ä¼šæœ‰
4. é¢„å‘å¸ƒç¯å¢ƒï¼ˆä½“éªŒæœï¼‰ï¼šå’Œæ­£å¼ç¯å¢ƒä¸€è‡´ï¼ŒåŒä¸€ä¸ªæ•°æ®åº“
5. æ­£å¼ç¯å¢ƒ(çº¿ä¸Šï¼Œå…¬å¼€å¯¹å¤–è®¿é—®çš„é¡¹ç›®)ï¼šå°½é‡ä¸è¦æ”¹åŠ¨ï¼Œä¿è¯ä¸Šçº¿"å®Œç¾"è¿è¡Œ



é¡¹ç›®æ‰“åŒ…å®Œæˆåè¿è¡Œå‘½ä»¤

```bash
java -jar åŒ…å --spring.profiles.active = é…ç½®æ–‡ä»¶å
```

ä¸»è¦æ˜¯æ”¹

* ä¾èµ–çš„ç¯å¢ƒåœ°å€
  * æ•°æ®åº“åœ°å€
  * ç¼“å­˜åœ°å€
  * æ¶ˆæ¯é˜Ÿåˆ—åœ°å€
  * é¡¹ç›®ç«¯å£å·
* æœåŠ¡å™¨é…ç½®



# é¡¹ç›®éƒ¨ç½²

[å‚è€ƒæ–‡æ¡£][https://www.bilibili.com/opus/650021069734805524]

éœ€è¦LinuxæœåŠ¡å™¨(å°½é‡ä½¿ç”¨Centos8+)



## åŸå§‹éƒ¨ç½²

æ‰€è°“åŸå§‹éƒ¨ç½²å°±æ˜¯ä»€ä¹ˆéƒ½è‡ªå·±è£…



### é…ç½®æ­¥éª¤

å‰ç«¯ nginxéƒ¨ç½²

å®‰è£…nginxæœåŠ¡å™¨ ä¸€å®šè¦å­¦ä¼š

1. ç”¨ç³»ç»Ÿè‡ªå¸¦çš„è½¯ä»¶åŒ…ç®¡ç†å™¨å¿«é€Ÿå®‰è£… å¦‚centosçš„yum,ubuntuçš„apt

2. å»å®˜ç½‘ä¸‹è½½ https://nginx.org/en/download.html
   ```bash
   netstat -ntlp æŸ¥çœ‹å½“å‰ç«¯å£è¢«å“ªä¸ªè¿›ç¨‹å ç”¨
   nohup  &
   jobs ä½¿ç”¨nohupè¿è¡Œçš„ç¨‹åº
   jps æŸ¥çœ‹å½“å‰è¿è¡Œçš„Javaç¨‹åº
   ```



åç«¯éƒ¨ç½² 

å®‰è£…jdkã€mavenæ‰“åŒ…å·¥å…· è¿è¡ŒjaråŒ…å³å¯



## å®å¡”Linux



## Dockeréƒ¨ç½²

dockeræ˜¯å®¹å™¨ï¼Œå¯ä»¥å°†é¡¹ç›®ç¯å¢ƒï¼ˆå¦‚javaã€nginxï¼‰å’Œé¡¹ç›®çš„ä»£ç ä¸€èµ·æ‰“åŒ…æˆé•œåƒï¼Œæ›´å®¹æ˜“åˆ†å‘å’Œç§»æ¤ã€‚

åœ¨å¯åŠ¨é¡¹ç›®æ—¶ï¼Œä¸éœ€è¦æ•²ä¸€å¤§å †å‘½ä»¤ï¼Œè€Œæ˜¯ç›´æ¥ä¸‹è½½é•œåƒå¯åŠ¨å³å¯





# å‰ç«¯

[Ant Design Pro][https://pro.ant.design/zh-CN/]

åˆå§‹åŒ–  yarn(åŒ…ç®¡ç†å™¨ å¯ä»¥å¹¶è¡Œä¸‹è½½ä¾èµ–)
```cmd
npm install yarn tyarn -g
```

UIä»£ç ç”Ÿæˆ
```
yarn add @umijs/preset-ui -D
```







# é”™è¯¯ä¿¡æ¯

å¯åŠ¨æ—¶é”™è¯¯
```tex
yarn : æ— æ³•åŠ è½½æ–‡ä»¶ C:\Users\Just Lee\AppData\Roaming\npm\yarn.ps1ï¼Œå› ä¸ºåœ¨æ­¤ç³»ç»Ÿä¸Šç¦æ­¢è¿è¡Œè„šæœ¬

npm : æ— æ³•åŠ è½½æ–‡ä»¶ D:\NodeJS\npm.ps1ï¼Œå› ä¸ºåœ¨æ­¤ç³»ç»Ÿä¸Šç¦æ­¢è¿è¡Œè„šæœ¬ã€‚
```

è§£å†³æ–¹æ³•ï¼š(PowerShell å®‰å…¨ç­–ç•¥é—®é¢˜)
```tex
ç¬¬ä¸€æ­¥ æŸ¥çœ‹æƒé™
get-ExecutionPolicy

ç¬¬äºŒæ­¥ ä¿®æ”¹æƒé™
set-executionpolicy remotesigned
```



## 2025-9-7 åˆ†é¡µæŠ¥é”™

åç«¯idé‡‡ç”¨çš„æ˜¯é›ªèŠ±ç®—æ³• ç”Ÿæˆé•¿ä¸º19ä½çš„id 
é”™è¯¯æè¿°ï¼š
![image-20250907153120746](assets/image-20250907153120746.png)

![image-20250907153135699](assets/image-20250907153135699.png)

å†æ¬¡ç‚¹å‡»ç¬¬ä¸€é¡µbugå‡ºç° åŸå…ˆç¬¬ä¸€é¡µç¬¬ä¸€è¡Œåº”è¯¥ä¸ºjakieå¸æˆ· ä½†ç°åœ¨å´æ˜¾ç¤ºçš„æ˜¯1111è´¦æˆ· 

![image-20250907153231473](assets/image-20250907153231473.png)

æ§åˆ¶å°ç»™å‡ºçš„æŠ¥é”™ä¿¡æ¯

![image-20250907153341882](assets/image-20250907153341882.png)

> æˆ‘çš„çŒœæµ‹æ€€ç–‘æ˜¯ å‰ç«¯ç”¨æ¥å­˜å‚¨çš„idçš„æ•°æ®ç±»å‹æº¢å‡ºäº†



æœç„¶

å°è¯•åœ¨å‰ç«¯æ‰“å°
```ts
console.log(1960552663930236934);
console.log(1960552663930236935);

æ§åˆ¶å°è¾“å‡ºçš„ç»“æœéƒ½æ˜¯
1960552663930237000
```

> ### ğŸ“Œ é‡ç‚¹
>
> - TypeScript é‡Œåªæœ‰ä¸¤ç§åŸç”Ÿæ•´æ•°ç›¸å…³çš„æ•°å€¼ç±»å‹ï¼š
>   - `number` â†’ IEEE 754 **åŒç²¾åº¦æµ®ç‚¹æ•°**ï¼ˆ64 ä½ï¼ŒèŒƒå›´å¤§ä½†ç²¾åº¦åªæœ‰ 53 bitï¼Œçº¦ Â±9e15ï¼‰
>   - `bigint` â†’ ä»»æ„ç²¾åº¦æ•´æ•°ï¼ˆä»¥ `n` ç»“å°¾è¡¨ç¤ºå­—é¢é‡ï¼‰
> - ä½ çš„ `1960552663930236934` **è¶…è¿‡äº† `Number.MAX_SAFE_INTEGER` (9,007,199,254,740,991)**ï¼Œæ‰€ä»¥å®ƒåœ¨ `number` ä¸­å­˜å‚¨æ—¶ä¼š **ä¸¢å¤±ç²¾åº¦**ã€‚
>
> ä¸¾ä¸ªä¾‹å­ï¼š
>
> ```
> console.log(Number.MAX_SAFE_INTEGER); 
> // 9007199254740991
> 
> console.log(1960552663930236934); 
> // å®é™…æ‰“å°: 1960552663930237000 (å·²ç»è¢«å››èˆäº”å…¥äº†)
> 
> console.log(1960552663930236934 === 1960552663930236935);
> // trueï¼Œç²¾åº¦ä¸¢å¤±äº†
> ```
>
> ------
>
> ### âœ… è§£å†³æ–¹æ¡ˆ
>
> å¦‚æœä½ è¦åœ¨å‰ç«¯æ­£ç¡®å­˜å‚¨è¿™ç§ **é›ªèŠ± ID**ï¼ˆ19 ä½ï¼‰ï¼Œéœ€è¦ç”¨ï¼š
>
> 1. **bigint**
>
>    ```
>    const id: bigint = 1960552663930236934n;
>    console.log(id);
>    ```
>
>    > æ³¨æ„ï¼šbigint å’Œ number ä¸èƒ½æ··ç®—ã€‚
>
> 2. **å­—ç¬¦ä¸²**
>
>    ```
>    const id: string = "1960552663930236934";
>    ```
>
>    è¿™ä¹Ÿæ˜¯å¾ˆå¤šåç«¯æ¥å£çš„å¸¸è§åšæ³•ï¼ˆæŠŠ long ç±»å‹çš„é›ªèŠ± ID è½¬æˆå­—ç¬¦ä¸²è¿”å›ï¼Œé¿å… JS ç²¾åº¦ä¸¢å¤±ï¼‰ã€‚
>
> ------
>
> ğŸ‘‰ æ‰€ä»¥åœ¨ TypeScript é‡Œï¼Œ`1960552663930236934` é»˜è®¤æ˜¯ `number`ï¼Œä½†å› ä¸ºè¶…å‡ºäº†å®‰å…¨æ•´æ•°èŒƒå›´ï¼Œä¼šè¢«é”™è¯¯åœ°å­˜å‚¨æˆ **1960552663930237000**ã€‚



# ğŸš©flag

ç”±äºä¸ä¼šå‰ç«¯ç«‹ä¸ªflagä»¥åå›æ¥æ”¹ çœ‹ä¸æ‡‚å‰ç«¯ æ”¹ä¸€ä¸ªåœ°æ–¹è¦åŠ¨å¾ˆå¤šåœ°æ–¹ 



# åç«¯

springbooté¡¹ç›®åˆå§‹åŒ– æœåŠ¡å™¨URL 

* å¯é€‰springboot 2.x.x- 3.0.2 ç‰ˆæœ¬  é˜¿é‡Œhttps://start.aliyun.com
* springboot3 ç‰ˆæœ¬ å®˜æ–¹https://start.spring.io/

![image-20250823151805808](assets/image-20250823151805808.png)



## ä¾èµ–(æ‰‹åŠ¨æ·»åŠ )

```xml
<!-- mybatis-plus å®˜ç½‘ https://baomidou.com/getting-started/ -->
<dependency>
    <groupId>com.baomidou</groupId>
    <artifactId>mybatis-plus-boot-starter</artifactId>
    <version>3.5.12</version>
</dependency>
```





## æ³¨å†Œé€»è¾‘

* å‰ç«¯å‘é€ç”¨æˆ·è´¦æˆ·ã€å¯†ç ã€äºŒæ¬¡å¯†ç ä»¥åŠæ ¡éªŒç (å¦‚æ‰‹æœºå·)	è¯·æ±‚ç»™åç«¯
* åç«¯éªŒè¯æ•°æ®æ˜¯å¦æ»¡è¶³è¦æ±‚ seviceå±‚
  * è´¦æˆ·é•¿åº¦ ä¸å°äº 4ä½
  * è´¦æˆ·ä¸åŒ…å«ç‰¹æ®Šå­—ç¬¦
  * å¯†ç æ ¼å¼ ä¸å°äº8ä½
  * è¯·æ±‚sql éªŒè¯è´¦æˆ·æ˜¯å¦å·²ç»å­˜åœ¨
  * ä¸¤æ¬¡å¯†ç æ˜¯å¦åŒ¹é… åŠ æ ¡éªŒç æ­£ç¡®(todo)
* å¯¹å¯†ç è¿›è¡ŒåŠ å¯†å¹¶å­˜å…¥æ•°æ®åº“ä¸­ åŠ ç›(æ…å±æ£)

```java
 //ç”¨æˆ·åä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦
String validPattern = "[`~!@#$%^&*()+=|{}':;',\\\\[\\\\].<>/?~ï¼@#ï¿¥%â€¦â€¦&*ï¼ˆï¼‰â€”â€”+|{}ã€ã€‘â€˜ï¼›ï¼šâ€â€œâ€™ã€‚ï¼Œã€ï¼Ÿ]";
Matcher matcher = Pattern.compile(validPattern).matcher(userAccount);
if (matcher.find()) {
    throw new BusinessException(ErrorCode.PARAM_ERROR,"ç”¨æˆ·ååŒ…å«ç‰¹æ®Šå­—ç¬¦");

}
```





## ç™»å½•é€»è¾‘ 

* åç«¯éªŒè¯æ•°æ®æ˜¯å¦æ»¡è¶³è¦æ±‚ serviceå±‚
  * è´¦æˆ·é•¿åº¦ ä¸å°äº 4ä½
  * è´¦æˆ·ä¸­ä¸å­˜åœ¨ç‰¹æ®Šå­—ç¬¦
  * å¯†ç æ ¼å¼ ä¸å°äº8ä½
  * æŸ¥è¯¢ç”¨æˆ·æ˜¯å¦å­˜åœ¨ ï¼ˆè´¦æˆ·ã€å¯†ç ï¼‰ï¼ˆmpé€»è¾‘åˆ é™¤ é˜²æ­¢isDeleteä¸º1çš„ç”¨æˆ·è¢«æ‰¾åˆ°ï¼‰
  * æ•°æ®è„±æ•
* ç™»å½•æˆåŠŸè¿”å›è„±æ•åçš„å€¼  å¹¶ è®¾ç½®ç™»å½•æ€ å¯ä»¥å°†keyè®¾ç½®ä¸º ä¸€ä¸ªå¸¸é‡



## æ¥å£æµ‹è¯•

```java
@RestController
@RequestMapping(("/user"))
public class UserController {
    @Resource
    private UserService userService;

    @PostMapping("/login")
    public User userLogin(@RequestBody UserLoginRequest userLoginRequest, HttpServletRequest request) {
        if (userLoginRequest == null) {
            return null;
        }
        String userAccount = userLoginRequest.getUserAccount();

        String userPassword = userLoginRequest.getUserPassword();


        if (StringUtils.isAnyBlank(userAccount, userPassword)) {
            return null;
        }

        return userService.userLogin(userAccount, userPassword, request);
    }

    @PostMapping("/register")
    public Long userRegister(@RequestBody UserRegisterRequest userRegisterRequest) {
        if (userRegisterRequest == null) {
            return null;
        }
        String userAccount = userRegisterRequest.getUserAccount();
        String userPassword = userRegisterRequest.getUserPassword();
        String checkPassword = userRegisterRequest.getCheckPassword();


        if (StringUtils.isAnyBlank(userAccount, userPassword, checkPassword)) {
            return null;
        }

        return userService.userRegister(userAccount, userPassword, checkPassword);
    }


}
```



### IDEAè‡ªå¸¦å·¥å…·

![image-20250825210319210](assets/image-20250825210319210.png)

![image-20250825210401633](assets/image-20250825210401633.png)

![image-20250825210534964](assets/image-20250825210534964.png)



## è·å–å½“å‰ç”¨æˆ·

å‰ç«¯ç™»å½•æˆåŠŸåè°ƒç”¨è¯¥æ¥å£

### å®ç°é€»è¾‘

getè¯·æ±‚  è¿”å›å€¼å¯¹è±¡User

æ‹¿åˆ°ç™»å½•æ€ä¸­çš„å·²ç™»å½•ç”¨æˆ·å¯¹è±¡

æŸ¥è¯¢æ•°æ®åº“è¯¥å¯¹è±¡æ˜¯å¦å­˜åœ¨ å¦‚æœä¸å­˜åœ¨ç›´æ¥æŠ›å¼‚å¸¸

å­˜åœ¨åˆ™è¿”å›è„±æ•åçš„ç”¨æˆ·ä¿¡æ¯



**åˆ¤æ–­æ¡ä»¶**

å…³äºæ˜¯å¦ç›´æ¥è¿”å›ç™»å½•æ€å¯¹è±¡çš„ä¸¤ç§åˆ¤æ–­æ–¹æ³•

* ç³»ç»Ÿä¸­å¯¹ç”¨æˆ·æ•°æ®ä¿®æ”¹çš„é¢‘ç‡ä½(ä¸‡å¹´ä¸å˜çš„) å¯ä»¥æ ¹æ®ä¸šåŠ¡è¦æ±‚ç›´æ¥è¿”å›
* ä¿®æ”¹é¢‘ç‡è¾ƒé«˜çš„(ä¾‹å¦‚ï¼šå¯¹ç”¨æˆ·çš„ç§¯åˆ†è¿›è¡Œä¿®æ”¹) å°±éœ€è¦æŸ¥è¯¢æ•°æ®åº“æ‹¿åˆ°"æœ€æ–°çš„"ç”¨æˆ·ä¿¡æ¯

```
å¯¹äºç”¨æˆ·ä¿®æ”¹é¢‘ç¹çš„ç³»ç»Ÿæ¥è¯´æœ€å¥½æ˜¯æŸ¥è¯¢ä¸€æ¬¡æ•°æ®åº“
å¦‚æœä¸é¢‘ç¹ å¯ä»¥ç›´æ¥è¿”å›sessionåŸŸä¸­å·²ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯
```

é±¼çš®å»ºè®®æˆ‘ä»¬åœ¨æœ¬ç³»ç»Ÿå¼€å‘ä¸­æŸ¥è¯¢æ•°æ®åº“





## ç”¨æˆ·ç®¡ç†æ¥å£

`æŸ¥è¯¢ã€åˆ é™¤`

### æŸ¥è¯¢å’Œåˆ é™¤é€»è¾‘

æŸ¥è¯¢ å’Œ åˆ é™¤ ä»…å¯¹**ç®¡ç†å‘˜ç”Ÿæ•ˆ** æ•°æ®åº“è¡¨ä¸­æ·»åŠ userRoleå­—æ®µ  **é‰´æƒ**

* è°ƒç”¨ /search æ¥å£ 
  * è¯·æ±‚æ–¹å¼ Get
  * æ‰€éœ€å‚æ•° 
    * String username é€šè¿‡ç”¨æˆ·åè¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢ å¦‚æœè¯¥å‚æ•°ä¸ºç©ºæŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·
      ```java
      QueryWrapper<User> userQueryWrapper = new QueryWrapper<>();
      if(StringUtils.isNotBlank(username)){
          userQueryWrapper.like("username", username);
      }
      List<User> list = userService.list(userQueryWrapper);
      ```
    * HttpServletRequestç”¨æ¥è·å–session åˆ¤æ–­ç™»å½•æ€ä¸­çš„ç”¨æˆ·æ˜¯å¦ä¸ºç®¡ç†å‘˜èº«ä»½
  * è¿”å›å‚æ•° JSON
* /delete 
  * è¯·æ±‚æ–¹å¼ Post
  * æ‰€éœ€å‚æ•° 
    * long id æ ¹æ®ç”¨æˆ·çš„idè¿›è¡Œåˆ é™¤ 
    * HttpServletRequestç”¨æ¥è·å–session åˆ¤æ–­ç™»å½•æ€ä¸­çš„ç”¨æˆ·æ˜¯å¦ä¸ºç®¡ç†å‘˜èº«ä»½
  * è¿”å›å‚æ•° JSON





## ç”¨æˆ·ç™»å‡º

è¯·æ±‚æ–¹å¼ï¼šPOST

è¯·æ±‚åœ°å€ï¼š/logout

è¯·æ±‚æ–¹æ³•è¿”å›å€¼ï¼šreturn 1;



## ç”¨æˆ·æ³¨å†Œæ ¡éªŒ å¯¹æ³¨å†Œä¸šåŠ¡åšå°å°çš„å‡çº§

> ç®€æ˜“ç‰ˆ ç”¨æˆ·æ‰‹åŠ¨è¾“å…¥ æ˜Ÿçƒç¼–å·  å¤æ‚é¡¹ç›®ä¸æ¨èä½¿ç”¨

é‡æ–°ä¿®æ”¹è¡¨ç»“æ„ã€æ”¹åŠ¨ä»£ç 

è¯·æ±‚æ–¹å¼ï¼šPost

è¯·æ±‚åœ°å€ï¼š/register

ä¿®æ”¹æ³¨å†Œä¸šåŠ¡

* ä¿®æ”¹æ•°æ®è¡¨ç»“æ„ æ·»åŠ  planetCodeå­—æ®µ varchar éç©º é»˜è®¤å€¼ä¸º0

* æ·»åŠ æ˜Ÿçƒç¼–å·å‚æ•°   å‚æ•°è¿‡å¤šå¯ä»¥å°è£…æˆä¸€ä¸ªç±»å¯¹è±¡ è¿™é‡Œæˆ‘å°±ä¸å°è£…äº†
* éªŒè¯æ˜Ÿçƒç¼–å·çš„é•¿åº¦æ˜¯å¦ ä¸ä¸ºç©º ã€ä¸ä¼šnull ä¸” é•¿åº¦ä¸å¤§äº5 
* æŸ¥è¯¢æ•°æ®åº“è¡¨è¯¥ç¼–å·æ˜¯å¦å­˜åœ¨ 



> æ³¨å†Œ ä¸ªäººæ‰©å±• to do æ³¨å†Œæ‰‹æœºå·ã€é€šè¿‡æ‰‹æœºå·è¿›è¡Œç™»å½•





## åç«¯ä¼˜åŒ–

1. **è¿”å›é€šç”¨å¯¹è±¡**

   å¯¹è¯·æ±‚å“åº”çš„ç»“æœè¿›è¡Œå°è£…ã€è¡¥å……ä¸€äº›ä¿¡æ¯ å‘Šè¯‰å‰ç«¯åœ¨ä¸šåŠ¡å±‚é¢ä¸Šæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥

   ```json
   {
       "date":"xxxx"
   }
   
   |
   V
   
   è¯·æ±‚æˆåŠŸ
   {
       "code": çŠ¶æ€ç     ä¸ºä»€ä¹ˆä¸ç”¨Httpçš„çŠ¶æ€ç   404ã€500ã€400ã€405 ç­‰ ä¸»è¦æ˜¯è¿™æ ·çš„çŠ¶æ€ç å¤ªè¿‡äºå¹¿æ³›ä¸èƒ½å¾ˆç²¾ç¡®çš„çŸ¥é“ç¨‹åºé‚£é‡Œçš„é—®é¢˜ å¦‚500å†…éƒ¨å¼‚å¸¸æ˜¯å“ªä¸ªè¯·æ±‚çš„å“ªä¸ªæ–¹æ³•å‡ºç°äº†é—®é¢˜å‘¢ å¯¹æ­¤æˆ‘ä»¬ä½¿ç”¨è‡ªå®šä¹‰çš„çŠ¶æ€ç  æ›´å¥½çš„å®šä½é”™è¯¯
       "data":{"username":"xxxxx"....}
   	"message":"ok"
   }
   
   |
   V
   
   è¯·æ±‚é”™è¯¯
   {
       "code":çŠ¶æ€ç ,
       "data":{ç©º},
   	"message":"æŠ¥é”™çš„ä¿¡æ¯",
       "description":"æ›´è¯¦ç»†çš„æŠ¥é”™ä¿¡æ¯"
   }
   ```

   ```java
   com/jakie/usercenter/commonåŒ…ä¸‹
   @Data
   public class BaseResponse<T> implements Serializable {
       private int code;
       private T data;
       private String msg;
       private String description;
   
       public BaseResponse(int code, T data, String msg) {
           this.code = code;
           this.data = data;
           this.msg = msg;
           
       }
   }
   
   Controllerå±‚è¿”å›çš„å¯¹è±¡
       new BaseResponse<>(200,data,"xxx");
   
   Live templateè®¾ç½®çƒ­é”® å¯å¿«é€Ÿç”Ÿæˆä»£ç 
       
   è¿˜å¯ä»¥å†™ä¸€ä¸ªç±»å¯¹ä¸Šé¢çš„å†æ¬¡è¿›è¡Œå°è£… å¯¹ä¸€äº›å›ºå®šçš„å€¼(çŠ¶æ€ç ã€msg)ä¸éœ€è¦æ‰‹åŠ¨ç¼–å†™ é˜²æ­¢å†™é”™
   /**
    * è¿”å›ç»“æœå¤„ç†ç±»
    */
   public class ResultUtils {
       public static <T> BaseResponse<T> success(T data) {
           return new BaseResponse<>(200,data,"è¯·æ±‚æˆåŠŸ");
       }
   }
   é€šè¿‡è¿™ä¸ªå·¥å…·ç±»åªéœ€è¦å°†ç»“æœä¼ å…¥å¯¹åº”çš„æ–¹æ³•è¿”å›å€¼ å³å¯é˜²æ­¢é”™è¯¯çš„å‘ç”Ÿ
       
       ä¼˜åŒ–Controllerå±‚è¿”å›çš„å¯¹è±¡
   return ResultUtils.success(æ–¹æ³•è¿”å›å€¼)
   ```

   1. å°è£…çŠ¶æ€ç åŠçŠ¶æ€ç çš„å«ä¹‰
      ```java
      public enum ErrorCode {
      
          SUCCESS(20000,"è¯·æ±‚æˆåŠŸ",""),
          PARAM_ERROR(40001,"å‚æ•°å¼‚å¸¸",""),
          NOT_LOGIN(40002,"æœªç™»å½•",""),
          NO_AUTH(40003,"æƒé™ä¸è¶³",""),
          NULL_PARAM(40004,"å‚æ•°ä¸ºç©º","");
      
          private final int code;
          private final String message;
          private final String description;
      
      
      
          ErrorCode(int code, String message, String description) {
              this.code = code;
              this.message = message;
              this.description = description;
          }
      ```

      ä¼˜åŒ–è¿”å›ç»“æœå¤„ç†ç±» æ·»åŠ ErrorCodeä¸ºå‚æ•°çš„erroræ–¹æ³• å†å¯¹åº”çš„BaseResponseç±»ä¸­æ·»åŠ ç›¸å¯¹çš„æ„é€ å™¨
      ```java
      public class ResultUtils {
          public static <T> BaseResponse<T> success(T data) {
              return new BaseResponse<>(200,data,"è¯·æ±‚æˆåŠŸ");
          }
      
          public static BaseResponse error(ErrorCode errorCode) {
              return new BaseResponse<>(errorCode);
          }
      }
      ```

      ä¼˜åŒ–Controllerå±‚è¿”å›çš„é”™è¯¯ä¿¡æ¯
      ```java
       @PostMapping("/login")
          public BaseResponse<User> userLogin(@RequestBody UserLoginRequest userLoginRequest, HttpServletRequest request) {
              if (userLoginRequest == null) {
                  return ResultUtils.error(ErrorCode.NULL_PARAM);
      //            return null;
              }
      ```

   2. å…¨å±€å¼‚å¸¸å¤„ç†
      å®šä¹‰å…¨å±€å¼‚å¸¸å¤„ç†ç±» **æœªå—æ£€å¼‚å¸¸(unchecked Exception)** è°ƒç”¨è€…å¯ä»¥ä¸ç”¨ä½¿ç”¨try-catchæ•è·å¼‚å¸¸ å¹¶ä¸”ä¸éœ€è¦throws å¼‚å¸¸ JVMä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬æŠ›å‡º

   ```java
   package com.jakie.usercenter.exception;
   
   import com.jakie.usercenter.common.ErrorCode;
   
   public class BusinessException extends RuntimeException {
   
       private final int code;
       private final String message;
       private final String description;
   
       public BusinessException(String message, int code, String msg, String description) {
           super(message);
           this.code = code;
           this.message = message;
           this.description = description;
       }
   
       public BusinessException(ErrorCode errorCode, String description) {
           super(errorCode.getMessage());
           this.code = errorCode.getCode();
           this.message = errorCode.getMessage();
           this.description = description;
       }
   }
   
   ```

   æµ‹è¯•æ³¨å†Œ 
   ```json
   Post http://localhost:8080/user/register
   {
       "userAccount":"jakie",
       "userPassword":"123456",
       "checkPassword":"123456",
       "planetCode":"1"
   }
   ```

   ![image-20250827161348598](assets/image-20250827161348598.png)

   ä¸ºä»€ä¹ˆæŠ¥500 æ˜¯å› ä¸ºåç«¯æŠ¥é”™äº†
   ![image-20250827161427349](assets/image-20250827161427349.png)

   æ˜¾ç„¶è¿™ä¸ç¬¦åˆæˆ‘ä»¬æœ€å¼€å§‹æƒ³è¦çš„`è¿”å›å…¬å…±å¯¹è±¡`ç»“æœ
   ```java
   æˆåŠŸ
   {
       "code":"",
       "data":{"xxx":"xxx"}
       "message":"xxx"
   }
   ```

   å¼•å‡ºå…¨å±€å¼‚å¸¸å¤„ç†

   1. ç¼–å†™å…¨å±€å¼‚å¸¸å¤„ç†å™¨ (**å¯ä»¥åœ¨å¤„ç†å…¨å±€å¼‚å¸¸çš„åœ°æ–¹ æ‰“å°æ—¥å¿—(å¯¹æ—¥å¿—é›†ä¸­ç®¡ç†)**)
      @RestControllerAdvice + @ExceptionHandler

      ä½œç”¨ï¼š

      1. æ•è·å…¨å±€å¼‚å¸¸ã€é›†ä¸­å¤„ç†ï¼Œè®©å‰ç«¯è·å–è·Ÿè¯¦ç»†çš„ä¿¡æ¯

      2. åŒæ—¶å±è”½æ‰é¡¹ç›®æœ¬èº«çš„å¼‚å¸¸ï¼ˆä¸æš´éœ²æœåŠ¡å™¨å†…éƒ¨çŠ¶æ€ï¼‰

         > å®‰å…¨éšæ‚£  æš´éœ²äº†é¡¹ç›®çš„ç»“æ„
         >
         > ![image-20250827162327107](assets/image-20250827162327107.png)


â€‹				å®ç°ï¼šé€šè¿‡Spring Aop å®ç°æ–¹æ³•è°ƒç”¨çš„å‰åçš„è¿›è¡Œé¢å¤–çš„å¤„ç†



# å†™ä»£ç æµç¨‹

å…ˆåšè®¾è®¡

ç¼–å†™ä»£ç 

æŒç»­ä¼˜åŒ–ï¼ï¼ï¼ ï¼ˆæå–å…¬å…±ä»£ç ã€å¤ç”¨ä»£ç /å¸¸é‡ï¼‰



# æ•°æ®åº“è®¾è®¡

ç”¨æˆ·è¡¨

createTimeï¼ŒupdateTimeï¼ŒisDelete

> â€‹	ä¼ä¸šä¸­ä¸€èˆ¬å¯¹äºåˆ é™¤è®°å½•å¾ˆæ•æ„Ÿã€ä¸€èˆ¬é€šè¿‡ä¸€ä¸ªç‰¹æ®Šå­—æ®µæ¥è¿›è¡Œæ ‡è¯† å¦‚ä¸Šé¢çš„isDeleteè·Ÿä¸šåŠ¡æ²¡æœ‰å…³ç³» åªæ˜¯ç”¨æ¥æ ‡è¯†è¿™æ¡æ•°æ®çš„çŠ¶æ€å·²ç»è¢«åˆ é™¤äº†



id ç”¨æˆ·id bigint

username ç”¨æˆ·å varchar

userAccount ç”¨æˆ·è´¦å· varchar

userPassword ç”¨æˆ·å¯†ç  varchar

gender ç”¨æˆ·æ€§åˆ«

avatarUrl ç”¨æˆ·å¤´åƒ varchar

phone ç”¨æˆ·ç”µè¯ varchar

status ç”¨æˆ·çŠ¶æ€ tinyint

email ç”¨æˆ·é‚®ç®± varchar



createTime ç”¨æˆ·åˆ›å»ºæ—¶é—´

updateTime ç”¨æˆ·ä¿®æ”¹æ—¶é—´

isDelete åˆ é™¤ç”¨æˆ· æ ‡è¯†



## æ•°æ®åº“è¡¨

```mysql
-- auto-generated definition
create table user
(
    id           bigint auto_increment comment 'ç”¨æˆ·id'
        primary key,
    username     varchar(512)                           null comment 'ç”¨æˆ·å',
    userAccount  varchar(256)                           null comment 'ç”¨æˆ·è´¦å·',
    userPassword varchar(256)                           not null comment 'ç”¨æˆ·å¯†ç ',
    gender       bigint                                 null comment 'æ€§åˆ«',
    avatarUrl    varchar(1024)                          null comment 'å¤´åƒ',
    phone        varchar(256)                           null comment 'ç”µè¯',
    status       int          default 0                 not null comment 'ç”¨æˆ·çŠ¶æ€ 0 æ­£å¸¸è´¦æˆ·',
    email        varchar(256)                           null comment 'ç”¨æˆ·é‚®ç®±',
    createTime   datetime     default CURRENT_TIMESTAMP not null comment 'ç”¨æˆ·åˆ›å»ºæ—¶é—´',
    updateTime   datetime     default CURRENT_TIMESTAMP not null on update CURRENT_TIMESTAMP comment 'ç”¨æˆ·æ›´æ–°æ—¶é—´',
    isDelete     tinyint      default 0                 not null comment 'æ ‡è¯†è¯¥ç”¨æˆ·æ˜¯å¦è¢«åˆ é™¤ 0 æœªåˆ é™¤',
    userRole     int          default 0                 not null comment 'ç”¨æˆ·è§’è‰² 0 - æ™®é€šç”¨æˆ·  1 - ç®¡ç†å‘˜',
    planetCode   varchar(512) default '0'               not null comment 'æ˜Ÿçƒç¼–å·'
);


```





## é”™è¯¯ä¿¡æ¯

### æ•°æ®åº“å¼‚å¸¸é”™è¯¯

[42000][1064] You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'CURRENT_TIME not null comment 'ç”¨æˆ·åˆ›å»ºæ—¶é—´',
updateTime datetime de' at line 13.

```mysql
createTime   datetime default CURRENT_TIMESTAMP not null comment 'ç”¨æˆ·åˆ›å»ºæ—¶é—´',
updateTime   datetime default CURRENT_TIMESTAMP not null comment 'ç”¨æˆ·æ›´æ–°æ—¶é—´',
```

> `CURRENT_TIME` è¿”å›çš„æ˜¯ **æ—¶:åˆ†:ç§’**ï¼Œæ²¡æœ‰æ—¥æœŸï¼Œä¸èƒ½ç›´æ¥ä½œä¸º `datetime` çš„é»˜è®¤å€¼ã€‚
>
> `datetime` æˆ– `timestamp` å­—æ®µè¦ç”¨çš„æ˜¯ **`CURRENT_TIMESTAMP`**ã€‚



### springbootä¸­mybatispluså¼‚å¸¸

Cause: java.sql.SQLSyntaxErrorException: Unknown column 'user_account' in 'field list'

```java
----æ•°æ®åº“è¡¨å­—æ®µ---------
id
username
userAccount
userPassword
gender
avatarUrl
phone
status
email
createTime
updateTime
isDelete
------JavaBean å¯¹è±¡---------
private Long id;
private String username;
private String userAccount;
private String userPassword;
private Long gender;
private String avatarUrl;
private String phone;
private Integer status;
private String email;
private Date createTime;
private Date updateTime;
private Integer isDelete;
```



> æ•°æ®åº“å­—æ®µåæ˜¯é©¼å³°å‘½å ä¸æ˜¯ ä¸‹åˆ’çº¿çš„æƒ…å†µ
>
> mybatisplusé»˜è®¤å¼€å¯ é©¼å³°åŒ¹é…(mapUnderscoreToCamelCase) æ—¢ è¡¨å­—æ®µA_Columnå¯¹åº” Beanå¯¹è±¡ aColumn
> ![image-20250824202614655](assets/image-20250824202614655.png)
>
> mybatis é»˜è®¤å…³é—­
> ![image-20250824202545274](assets/image-20250824202545274.png)







# å¼€å‘æŠ€å·§

1. æœç´¢æŠ€å·§ï¼šæµè§ˆå™¨ç­›é€‰ å°½é‡é€‰æ‹©1å¹´ä»¥å†…çš„
2. æ•°æ®åº“ä¸­å°½é‡ä¸è¦ç”¨å…³é”®å­—ä½œä¸ºå­—æ®µ æ·»åŠ åå¼•å· `  ä¹Ÿä¸è¦ç”¨ é¿å…åç»­é£é™©
3. å­˜å‚¨å¯†ç ä¸€å®šä¸è¦æ˜æ–‡å­˜å…¥çš„æ•°æ®åº“ä¸­ **åŠ ç›**
4. è¯·æ±‚å‚æ•°å¾ˆé•¿æ—¶ä¸å»ºè®®ä½¿ç”¨Getè¯·æ±‚
5. prsf å¿«é€Ÿè¾“å…¥ private static final 
6. ä¿®æ”¹å­—æ®µå‰ æœ€å¥½å…ˆæœä¸€ä¸‹å“ªäº›ä»£ç ä¸­ç”¨åˆ°äº†  é˜²æ­¢ä¿®æ”¹è¿‡å å¿˜è®°ä¿®æ”¹ä½¿ç”¨å…ˆå‰å­—æ®µçš„ä»£ç 
7. å¦‚æœä¸šåŠ¡é€»è¾‘ç®€å•ä¸”Controllerå±‚å°±èƒ½è§£å†³ å¯ä»¥ç›´æ¥äº¤ç»™Controllerå¤„ç† **ä½†å°½é‡é¿å… è¶Šå°‘è¶Šå¥½**
8. è¿”å›é€šç”¨å¯¹è±¡ å°è£…çŠ¶æ€ç åŠçŠ¶æ€ç çš„å«ä¹‰
9. maven æ‰“åŒ…è¿‡ç¨‹ å¯ä»¥ç¦ç”¨æµ‹è¯•
   ![image-20250828145208057](assets/image-20250828145208057.png)



# æ’ä»¶

## åˆ›å»ºBeanå¯¹è±¡é€šè¿‡æ’ä»¶

**æ ¹æ®mysqlè¡¨è‡ªåŠ¨ç”Ÿæˆç›¸å…³ ç±»ã€Serviceå±‚(Serviceæ¥å£ã€å®ç°ç±»)ã€Mapperæ¥å£åŠé…ç½®æ–‡ä»¶xml)**

å®‰è£…mybatisx
![image-20250824155345810](assets/image-20250824155345810.png)

ä½¿ç”¨æ–¹å¼  å³é”®è¡¨å
![image-20250824155410702](assets/image-20250824155410702.png)

é€‰æ‹©ç›¸å…³è·¯å¾„ï¼ˆå°æŠ€å·§ï¼šå¯ä»¥å…ˆæ”¾åœ¨é¡¹ç›®åŒ…ä¹‹å¤–çš„åŒ…ä¸‹ éœ€è¦å“ªä¸ªç±»æˆ–xmlé…ç½®æ–‡ä»¶å†æ‹–åˆ°é¡¹ç›®é‡Œå»  é¿å…ä¸€äº›ä¸å¿…è¦çš„å†²çªï¼‰

![image-20250824155524562](assets/image-20250824155524562.png)



é€‰æ‹©éœ€è¦çš„å±æ€§

![image-20250824155730669](assets/image-20250824155730669.png)

ç”ŸæˆæˆåŠŸä¹‹å
![image-20250824160034064](assets/image-20250824160034064.png)

![image-20250824160413162](assets/image-20250824160413162.png)

![image-20250824160443599](assets/image-20250824160443599.png)

![image-20250824160503578](assets/image-20250824160503578.png)

![image-20250824160534309](assets/image-20250824160534309.png)



## å¿«é€Ÿç”Ÿæˆgetterã€setteræ–¹æ³•æ’ä»¶

alter+enter è§¦å‘

![image-20250825150306682](assets/image-20250825150306682.png)



## å¿«é€Ÿå¡«å……å‚æ•°æ’ä»¶

alter+enterè§¦å‘

![image-20250825150346173](assets/image-20250825150346173.png)



# å¼€å‘ä¸­æ‰€å­¦çŸ¥è¯†ç‚¹

## æ•°æ®åº“ç›¸å…³

1. create schema  database åŒºåˆ«æ˜¯å•¥

   mysqlä¸­ schema ç­‰åŒäº database

   oracleä¸­ ä¸€ä¸ªç”¨æˆ·å¯¹åº”ä¸€ä¸ªschema å¯ä»¥é€šè¿‡schema.è¡¨åæ¥è·å–æ•°æ®

## Apacheå·¥å…·ç±»

1. Apacheå·¥å…·ç±» 

   ```java
   //åˆ¤æ–­cssä¸­æ˜¯å¦æœ‰ç©ºå€¼ æˆ– null
   StringUtils.isAnyBlank(CharSequence... css)     
   ```

## å•å…ƒæµ‹è¯•

1. å•å…ƒæµ‹è¯•æ–­è¨€(junit 5)
   ```java
   Assertion.assertEquals(é¢„æœŸå€¼,å®é™…å€¼)	//æ²¡æœ‰è¿”å›å€¼ å¦‚æœå®é™…å€¼ä¸é¢„æœŸå€¼ä¸åŒ¹é… æŠ¥é”™
   ```



## JavaåŸºç¡€

1. Java æšä¸¾ä¸æ”¯æŒsetteræ–¹æ³•

   



## ç½‘ç»œç›¸å…³

1. ä»£ç†çŸ¥è¯† 

   ä¸ºä»€ä¹ˆè¦è¿›è¡Œä»£ç† å‡è®¾å‰åç«¯åˆ†ç¦»é¡¹ç›® å‰ç«¯çš„ç«¯å£ä¸º8000 åç«¯çš„ç«¯å£ä¸º8080 å‰ç«¯æ²¡åŠæ³•ç›´æ¥è®¿é—® åç«¯è¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨åˆ°ä»£ç† 

   

   æ­£å‘ä»£ç†ï¼šæ›¿å®¢æˆ·ç«¯å‘é€è¯·æ±‚ ()

   * é€šè¿‡ä»£ç†æœåŠ¡å™¨
   * å‰ç«¯å‘ä»£ç†æœåŠ¡å™¨å‘é€è¯·æ±‚
   * ä»£ç†æœåŠ¡å™¨å†å°†å‰ç«¯çš„è¯·æ±‚å‘é€ç»™åç«¯

   

   åå‘ä»£ç†ï¼šæ›¿æœåŠ¡å™¨æ¥æ”¶è¯·æ±‚ 

   * åŒæ ·é€šè¿‡ä»£ç†æœåŠ¡å™¨ æ¥å—å‰ç«¯è¯·æ±‚
   * ä»£ç†æœåŠ¡å™¨é€šè¿‡æŸç§ç®—æ³•å°†è¯·æ±‚åˆ†æ‘Šç»™å¤šå°æœåŠ¡å™¨ å®ç°`è´Ÿè½½å‡è¡¡`
   
   > åå‘ä»£ç†ï¼šå‰ç«¯è®¿é—®æŸä¸ªåœ°å€æˆ–åŸŸå ç»è¿‡nginxå¯ä»¥è½¬å‘åˆ°å¯¹åº”çš„åç«¯é¡¹ç›®
   >
   > * ç”¨æˆ·ä¸­å¿ƒé¡¹ç›®ä¸Šçº¿æ—¶ é€šè¿‡nginxçœç•¥åç«¯ç«¯å£å·
   
2. é¢è¯•é¢˜ å‰ç«¯è®¿é—®æœåŠ¡å™¨éƒ½åšäº†é‚£äº›äº‹  ä»¥åŠåç«¯éƒ½åšäº†é‚£äº›äº‹
   ![image-20250908175745420](assets/image-20250908175745420.png)



## è·¨åŸŸé—®é¢˜ [è·¨åŸŸ](#cors)

æµè§ˆå™¨çš„å®‰å…¨é™åˆ¶ ï¼Œ`åŒæºç­–ç•¥`ä»…å…è®¸å‘ **åŒåè®®ï¼ˆhttp / httpsï¼‰ã€åŒåŸŸåï¼ˆexample.comï¼‰ã€åŒç«¯å£ï¼ˆ:8080 / :80ï¼‰** çš„æœåŠ¡å™¨å‘é€è¯·æ±‚

é‡æ£€è¯·æ±‚ å¤„ç†åŸŸåä¸åŒä¼šè¢«è§¦å‘è¿˜æœ‰ä»€ä¹ˆæƒ…å†µä¼šè¢«è§¦å‘



å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜

1. å°†å‰åç«¯æ”¹æˆç›¸åŒçš„åè®®ã€åŸŸååŠç«¯å£
2. ç½‘å…³å¤„ç†(Nginx)  **å¸¸ç”¨**
3. åç«¯é…ç½®
   1. æ·»åŠ @CrossOriginæ³¨è§£
   2. è‡ªå®šä¹‰Bean è¿”å›CorsFilter
   3. é…ç½®æ‹¦æˆªå™¨ å®ç°WebMvcConfigure
      ```java
      @Configuration
      public class CorsConfiguration implements WebMvcConfigurer {
      
          @Override
          public void addCorsMappings(CorsRegistry registry) {
              //è®¾ç½®å…è®¸è·¨åŸŸçš„è·¯å¾„
              registry.addMapping("/**")
                      //è®¾ç½®å…è®¸è·¨åŸŸè¯·æ±‚çš„åŸŸå
                      //å½“Credentialsä¸ºtrueæ—¶ï¼ŒOriginsä¸èƒ½ä¸ºæ˜Ÿå·ï¼Œéœ€ä¸ºå…·ä½“çš„ipåœ°å€ã€å¦‚æœæ¥å£ä¸å¸¦cookie,ipæ— éœ€è®¾æˆå…·ä½“ipã€‘
                      .allowedOrigins("http://81.68.217.102")
                      //æ˜¯å¦å…è®¸è¯ä¹¦ ä¸å†é»˜è®¤å¼€å¯
                      .allowCredentials(true)
                      //è®¾ç½®å…è®¸çš„æ–¹æ³•
                      .allowedMethods("*")
                      //è·¨åŸŸå…è®¸æ—¶é—´
                      .maxAge(3600);
          }
      }
      ```
   
      

502 Bad GateWay Nginxè½¬å‘æ‰¾ä¸åˆ°å¯¹åº”çš„æœåŠ¡ çœ‹çœ‹æ˜¯ä¸æ˜¯åç«¯æœåŠ¡Downæ‰äº†



# é¡¹ç›®éƒ¨ç½²å‡†å¤‡å·¥ä½œ

æœåŠ¡å™¨ä½¿ç”¨çš„æ˜¯Ubuntu 22.04LTS



## å‰ç«¯æœ¬åœ°å¯åŠ¨

å‰ç«¯nodeç‰ˆæœ¬ 16.16.0

`nvm use nodeç‰ˆæœ¬å·`   åˆ‡æ¢ç‰ˆæœ¬

`nvm install nodeç‰ˆæœ¬å·` ä¸‹è½½ç›¸å¯¹åº”çš„ç‰ˆæœ¬

`npm run start:dev` å¯åŠ¨é¡¹ç›®

![image-20250906111803774](assets/image-20250906111803774.png)



### âœ… ä¿®æ”¹ç›¸å…³IPåœ°å€

åœ¨nginxä¸Šå¤„ç†è·¨åŸŸé—®é¢˜æ—¶ **ä¸€å®šè®°ä½ä¸è¦åŠ ç«¯å£å¦åˆ™å¯èƒ½ä¼šç»•è¿‡nginxï¼Œå¯¼è‡´è·¨åŸŸå¤±æ•ˆ(å¦‚æœåç«¯æ²¡å¤„ç†è·¨åŸŸçš„è¯)**

![image-20250906113031410](assets/image-20250906113031410.png)



### âœ… è·¨åŸŸé—®é¢˜

[è§£å†³æ–¹æ¡ˆ](#cors)

![image-20250906113700083](assets/image-20250906113700083.png)



## åç«¯æœ¬åœ°å¯åŠ¨

[IDEAä¸‹SpringBootæŒ‡å®šé…ç½®æ–‡ä»¶å¯åŠ¨é¡¹ç›®][https://blog.csdn.net/qq_20957669/article/details/130335711]





# æœåŠ¡å™¨ éƒ¨ç½²æ–¹å¼

**æœåŠ¡å™¨ä½¿ç”¨çš„æ˜¯Ubuntu 22**

### åŸå§‹éƒ¨ç½²

#### å‰ç«¯

##### nginxå®‰è£…

[nginxå®˜ç½‘ä¸‹è½½åœ°å€][https://nginx.org/en/download.html] 
![image-20250906120121492](assets/image-20250906120121492.png)

```java

//ä¸‹è½½å‘½ä»¤
curl -o nginx-1.21.6.tar.gz http://nginx.org/download/nginx-1.21.6.tar.gz

//ä¸‹è½½æˆåŠŸä¹‹å è§£å‹  vå±æ€§è¡¨ç¤ºå¯è§†åŒ–è§£å‹è¿‡ç¨‹
tar -zxvf nginx-1.21.6.tar.gz
    

//è¿›å…¥åˆ° Nginx è§£å‹ç›®å½•
cd  nginx-1.21.6
//ç¼–è¯‘å‰çš„é…ç½®å’Œä¾èµ–æ£€æŸ¥
./configure
    
//ç¼–è¯‘
make
//å®‰è£…
make install
```



**Nginxå®‰è£…å®Œæˆåï¼Œé»˜è®¤è‡ªåŠ¨åˆ›å»º /usr/local/nginx ç›®å½•**

##### nginxé…ç½®

```bash
# é…ç½®nginxç¯å¢ƒå˜é‡
vim /etc/profile
    # /etc/profileæ–‡ä»¶å°¾æ·»åŠ 
	export PATH=$PATH:/usr/local/nginx/sbin

# æ·»åŠ å®Œæˆå esc + :wq ä¿å­˜å¹¶é€€å‡º
        
# nginxç¯å¢ƒç”Ÿæ•ˆ
source /etc/profile

# å¯åŠ¨nginx
nginx

# æŸ¥çœ‹nginxæ˜¯å¦å¯åŠ¨æˆåŠŸ
netstat -ntlp

# è¿›å…¥/service/nginx-1.21.6/conf å¤åˆ¶nginx.conf å¹¶å¤‡ä»½ä¸ºnginx.default.conf
# é±¼çš®å»ºè®®ä¸è¦åŠ¨nginx.confæ–‡ä»¶
cd /service/nginx-1.21.6/conf
cp nginx.conf nginx.default.conf
```

å¯åŠ¨æˆåŠŸ
![image-20250906133831785](assets/image-20250906133831785.png)



##### å‰ç«¯æ‰“åŒ…

æ‰“åŒ…è¿‡åç”Ÿæˆdistæ–‡ä»¶å¤¹![image-20250906135511321](assets/image-20250906135511321.png)



å‹ç¼©æ–‡ä»¶å¤¹

![image-20250906135753655](assets/image-20250906135753655.png)

ä¸Šä¼ åˆ°æœåŠ¡å™¨(æ”¾åˆ°è·Ÿnginxä¸€ä¸ªåŒ…ä¸‹)

![image-20250906140056527](assets/image-20250906140056527.png)

ä½¿ç”¨å‘½ä»¤è§£å‹
```bash
# -d æŒ‡å®šè§£å‹åæ–‡ä»¶çš„å­˜æ”¾ç›®å½•
unzip dist.zip -d user-center-front	
```



æŠŠuser-center-front/distä¸‹çš„æ‰€æœ‰å†…å®¹ç§»åˆ°user-center-frontä¸­ å¹¶åˆ é™¤ç©ºæ–‡ä»¶å¤¹dist
```bash
cd user-center-front/dist
mv * ../
rm -rf dist
```



ç°åœ¨å‰ç«¯çš„æ–‡ä»¶éƒ½æ”¾åˆ°æœåŠ¡å™¨çš„/root/service/user-center-frontæ–‡ä»¶å¤¹ä¸­
æˆ‘ä»¬éœ€è¦å¯¹ä¹‹å‰çš„nginx.confé…ç½®æ–‡ä»¶è¿›è¡Œä¿®æ”¹

![image-20250906141448458](assets/image-20250906141448458.png)

![image-20250906141814968](assets/image-20250906141814968.png)

ä¿®æ”¹å®Œæˆå:wqä¿å­˜ä¿®æ”¹å¹¶é€€å‡º
è®¿é—®å…¬ç½‘åœ°å€ http://81.68.217.102/user/login

> è¿™é‡Œä¸ºä»€ä¹ˆä¸åŠ ç«¯å£å·ï¼Ÿ(è®¡ç½‘è€å¸ˆè®²è¿‡çš„)
>
> å› ä¸ºhttpåè®®çš„é»˜è®¤ç«¯å£å·æ˜¯ 80
>
> https 443

![image-20250906143126257](assets/image-20250906143126257.png)

æ®é±¼çš®è¯´æ˜¯ï¼Œå› ä¸ºä¹‹å‰Nginxçš„å®‰è£…æ—¶ï¼Œç¼–è¯‘é‡ç½®äº†å®‰è£…ç¯å¢ƒï¼Œç°åœ¨çš„Nginxçš„é…ç½®æ–‡ä»¶åœ¨æœ€å¤–é¢çš„usr/local/nginxé‡Œ æˆ‘ä»¬æŠŠæˆ‘ä»¬serveiceæ–‡ä»¶é‡Œçš„nginx.confå¤åˆ¶åˆ° usr/local/nginx /conf/
![image-20250906143443869](assets/image-20250906143443869.png)



ç„¶ångixn -s reload å‘ç°è¿˜æ˜¯æŠ¥é”™

![image-20250906143545569](assets/image-20250906143545569.png)

![image-20250906143518733](assets/image-20250906143518733.png)

é€šè¿‡æŸ¥çœ‹è¿›ç¨‹æˆ‘ä»¬å‘ç°æœ‰ä¸€ä¸ª	UIDæ˜¯ **nobody**
![image-20250906143738049](assets/image-20250906143738049.png)



å†æ¬¡ä¿®æ”¹nginx.confæ–‡ä»¶å¤¹ (åˆ«å¿˜äº†åŒæ—¶ä¹Ÿè¦æ”¹/usr/local/nginx/conf/nginx.conf æˆ–è€…ç›´æ¥å¤åˆ¶)

![image-20250906144009201](assets/image-20250906144009201.png)

![image-20250906143939862](assets/image-20250906143939862.png)

![image-20250906144029623](assets/image-20250906144029623.png)

å†æ¬¡nginx -s reload è®¿é—® http://81.68.217.102/user/login
![image-20250906144620278](assets/image-20250906144620278.png)



#### åç«¯

å®‰è£…jdk maven

* jdk 1.8

* maven 3.9.10

  [mavenå®˜ç½‘][https://maven.apache.org/]

  ![image-20250906150538690](assets/image-20250906150538690.png)

```bash
# -y å®‰è£…è¿‡ç¨‹ä¸­æ‰€æœ‰çš„è¯¢é—®éƒ½è¾“å…¥ y ä¸éœ€è¦æ‰‹åŠ¨è¾“å…¥
apt install -y openjdk-8-jdk
curl -o apache-maven-3.9.10-bin.tar.gz https://archive.apache.org/dist/maven/maven-3/3.9.10/binaries/apache-maven-3.9.10-bin.tar.gz
# è¿™é‡Œä¸‹è½½apache-maven-3.9.10-bin.tar.gzå¤ªæ…¢ æˆ‘ç›´æ¥ä¸‹åˆ°æœ¬åœ°ç„¶åå†ä¸Šä¼ çš„æœåŠ¡å™¨ä¸Š
```

ä¸‹è½½æˆåŠŸå è¿›è¡Œè§£å‹
```bash
tar -zxvf apache-maven-3.9.10-bin.tar.gz
```

é…ç½®mavenç¯å¢ƒå˜é‡

```bash
pwd 
/root/service/apache-maven-3.9.10/bin

vim /etc/profile
source /etc/profile
```

![image-20250906151015061](assets/image-20250906151015061.png)

> è¿™æœ‰å¤šç§æ„å»ºæ–¹å¼
>
> * æœ¬åœ°æ‰“åŒ… ç„¶åä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Š
> * é€šè¿‡gitæ‹‰å–è¿œç¨‹ä»“åº“åç«¯ä»£ç  <- ä¸‹é¢æ¼”ç¤ºè¿™ç§

å®‰è£…git

```bash 
apt install -y git
```

æ‹‰å–è¿œç¨‹ä»“åº“ä»£ç  (æ”¾åˆ°/root/serviceä¸‹)
```bash
git clone https://github.com/LI-999/userCenter.git
```

> è¿™é‡Œçœç•¥äº†ä¸€äº›æ­¥éª¤ ä¸»è¦å°±æ˜¯æŠŠä»è¿œç¨‹æ‹‰å–ä¸‹æ¥çš„å‰åç«¯é¡¹ç›®ä¸­çš„åç«¯ä»£ç æå–å‡ºæ¥

æ‰“åŒ…æ„å»ºï¼Œè·³è¿‡æµ‹è¯•

```bash
# è¿›å…¥åç«¯ä»£ç è·¯å¾„
mvn package -DskipTests
```

![image-20250906153507320](assets/image-20250906153507320.png)

è¿™é‡Œä¸‹è½½çš„æ¯”è¾ƒæ…¢ ç›´æ¥æ¢æº(æ‰¾åˆ°mavenä¸‹çš„conf/setting.xml)
```xml
<!-- é˜¿é‡Œäº‘ä»“åº“ -->
    <mirror>
        <id>aliyunmaven</id>
        <mirrorOf>*</mirrorOf>
        <name>é˜¿é‡Œäº‘å…¬å…±ä»“åº“</name>
        <url>https://maven.aliyun.com/repository/public</url>
    </mirror>
```



æ‰“åŒ…å®Œæˆä¹‹åéœ€è¦ä¿®æ”¹jaråŒ…æƒé™æ‰èƒ½è¿è¡Œ
```bash
#  a+x è¡¨ç¤ºç»™æ‰€æœ‰ç”¨æˆ·æ·»åŠ æ‰§è¡Œæƒé™
chmod a+x user-center-backend-0.0.1-SNAPSHOT.jar
```



å¯åŠ¨å¤±è´¥![image-20250906200007961](assets/image-20250906200007961.png)

è§£å†³æ–¹æ¡ˆ

![image-20250906200135881](assets/image-20250906200135881.png)

ä¿®æ”¹åé‡æ–°æ‰“åŒ…



å¯åŠ¨é¡¹ç›®
```bash
java -jar ./user-center-0.0.1-SNAPSHOT.jar --spring.profiles-active=prod
```

![image-20250906200447905](assets/image-20250906200447905.png)

é¡¹ç›®æ˜¯æˆåŠŸå¯åŠ¨äº†ä½†æ˜¯åœ¨è¿™ä¸ªç•Œé¢ä¸èƒ½å¹²å…¶ä»–ä»»ä½•äº‹ã€‚

ctrl+cä¸­æ–­



è®©é¡¹ç›®åœ¨åå°è¿è¡Œ

```bash
nohup java -jar user-center-backend-0.0.1-SNAPSHOT.jar --spring.profiles.active=prod &
```
![image-20250906200934516](assets/image-20250906200934516.png)

> å¯ä»¥ä½¿ç”¨  `jps` æŸ¥çœ‹è¿è¡Œçš„javaç¨‹åº æˆ– `netstat -ntlp` æŸ¥çœ‹8080ç«¯å£æ˜¯å¦åœ¨ç›‘å¬

![image-20250906201048729](assets/image-20250906201048729.png)





#### æ•°æ®åº“

å®‰è£…MySQL

```bash
#æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨
apt update

# æŸ¥çœ‹å¯ä½¿ç”¨çš„å®‰è£…åŒ…
apt search mysql-server

## å®‰è£…æœ€æ–°ç‰ˆæœ¬
sudo apt install -y mysql-server

# æˆ–å®‰è£…æŒ‡å®šç‰ˆæœ¬
sudo apt install -y mysql-server-8.0
# å¦‚æœä¸åŠ -y ä¼šåœ¨å®‰è£…è¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿå°†æç¤ºä½ è®¾ç½®MySQLçš„rootå¯†ç ã€‚ç¡®ä¿å¯†ç è¶³å¤Ÿå¼ºï¼Œä¸”è®°ä½å®ƒï¼Œå› ä¸ºä½ å°†åœ¨ä»¥åéœ€è¦ç”¨åˆ°å®ƒã€‚

# å¦‚æœmysqlæ²¡æœ‰å¯åŠ¨å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤å¯åŠ¨
sudo systemctl start mysql

#mysqlå¼€æœºè‡ªå¯å‘½ä»¤
sudo systemctl enable mysql

#æŸ¥çœ‹mysqlè¿è¡ŒçŠ¶æ€
sudo systemctl status mysql


# å®‰è£…æˆåŠŸè¿‡å é»˜è®¤æ²¡æœ‰å¯†ç 
mysql #å³å¯ç›´æ¥ç™»å½•

# è®¾ç½®å¯†ç  mysql8.0
ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'æ–°å¯†ç ';
```



#### æ•°æ®åº“

Ubuntuå®‰è£…MySql:https://blog.csdn.net/weixin_45626288/article/details/133220238 ä½œç”¨ï¼šé…ç½®å¯†ç ä»¥åŠå¯åŠ¨SQLæœåŠ¡

Ubuntué˜²ç«å¢™:https://juejin.cn/post/7296386947113877540 ä½œç”¨ï¼šå¼€å¯MySQLæœåŠ¡ç«¯å£ 



##### IDEAè¿æ¥ä¸ä¸Šè¿œç¨‹MySQL

![image-20250906180115673](assets/image-20250906180115673.png)

#### è§£å†³æ–¹æ³•

> æ³¨æ„ï¼šè¿™é‡Œåº”è¯¥è®¾ç½®çš„æ˜¯è¿œç¨‹çš„æ•°æ®åº“çš„host  å› ä¸ºå®ƒæ‰æ˜¯è¢«æˆ‘ä»¬è®¿é—®çš„

`host` å­—æ®µçš„ä½œç”¨

- **æ§åˆ¶è¯¥ç”¨æˆ·èƒ½ä»å“ªäº›ä¸»æœºè¿æ¥åˆ° MySQL**ã€‚
- MySQL çš„è´¦å·æ˜¯ç”± **`user` + `host` ç»„åˆå”¯ä¸€ç¡®å®š**çš„ï¼Œè€Œä¸æ˜¯å•ç‹¬çš„ `user`ã€‚
  - ä¾‹å¦‚ï¼š`'root'@'localhost'` å’Œ `'root'@'%'` æ˜¯ä¸¤ä¸ªä¸åŒçš„è´¦å·ã€‚

```mysql
use mysql
select host from user where user='root';
```

![image-20250906180242071](assets/image-20250906180242071.png)

```mysql
update user set host = '%' where user='root';
# åˆ·æ–° ä½¿é…ç½®ç”Ÿæ•ˆ
flush privileges;
```





### å®å¡”éƒ¨ç½²

#### å®‰è£…å®å¡”Linux

##### é‡è£…ç³»ç»Ÿ

![image-20250908084959037](assets/image-20250908084959037.png)

![image-20250908085146982](assets/image-20250908085146982.png)

![image-20250908085204776](assets/image-20250908085204776.png)

é‡è£…å®Œæˆè¿‡å

![image-20250908085627717](assets/image-20250908085627717.png)

ç‚¹å‡»ç™»å½•å¹¶è¾“å…¥ç›¸å…³å‘½ä»¤ è·å–å®å¡”Linuxè´¦æˆ·å’Œå¯†ç 
![image-20250908085812806](assets/image-20250908085812806.png)

å¦‚æœè®¿é—®ä¸äº†è®°å¾—æ”¾è¡ŒæœåŠ¡å™¨çš„8888ç«¯å£(å®å¡”Linuxé»˜è®¤ç«¯å£)

æŸ¥çœ‹æœ¬æœºIPåœ°å€ 
<p style="color:orange">
    è¿™é‡Œæˆ‘æœ‰ä¸€ä¸ªç–‘æƒ‘ç‚¹
    1.ä¸ºä»€ä¹ˆç½‘é¡µä¸ŠæŸ¥çš„æœ¬æœºåœ°å€å’Œipconfigå‡ºæ¥çš„åœ°å€ä¸ä¸€æ ·
    2.ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç½‘é¡µä¸ŠæŸ¥åˆ°çš„æœ¬æœºåœ°å€è€Œä¸æ˜¯ipconfig
</p>
> ä¸¤è€…ä¹‹é—´çš„ä¸åŒåœ¨äºä¸€ä¸ªæ˜¯å…¬ç½‘IP ä¸€ä¸ªå†…ç½‘IPã€å¹¶ä¸”å…¬ç½‘æ˜¯å…¨çƒæ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥è®¿é—®çš„åœ°å€è€Œï¼Œå†…ç½‘IPä»…é™äºå±€åŸŸç½‘å†…å¯è®¿é—®
>
> 
>
> **å†…ç½‘ IP**ï¼šä»…åœ¨å±€åŸŸç½‘å†…æœ‰æ•ˆï¼Œä¸èƒ½ç›´æ¥è¢«å¤–ç½‘è®¿é—®ã€‚
>
> **å…¬ç½‘ IP**ï¼šå…¨çƒå”¯ä¸€ï¼Œå¯ä»¥è¢«å¤–ç½‘è®¿é—®ã€‚




![image-20250908090801397](assets/image-20250908090801397.png)

![image-20250908090657621](assets/image-20250908090657621.png)

å†æ¬¡è®¿é—® è®¿é—®æˆåŠŸè¾“å…¥å¯¹åº”çš„è´¦å·å¯†ç   ç™»å½•æˆåŠŸè¿‡åè®°å¾—ä¿®æ”¹è´¦å·å’Œå¯†ç 
![image-20250908091246097](assets/image-20250908091246097.png)

ç™»å½•æˆåŠŸè¿‡å æ‰¾åˆ°è®¾ç½®å¹¶ä¿®æ”¹å¯†ç 
![image-20250908091615494](assets/image-20250908091615494.png)



ä¿®æ”¹è¿‡åå®ƒä¼šè¦æ±‚é‡æ–°ç™»å½• ç”¨ä¿®æ”¹è¿‡åçš„è´¦å·å¯†ç ç™»å½•
æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥å®‰è£…ç›¸å¯¹åº”çš„è½¯ä»¶ æ‰¾åˆ°è½¯ä»¶å•†åº—
![image-20250908092013458](assets/image-20250908092013458.png)

é€‰æ‹©æé€Ÿå®‰è£…

![image-20250908092118582](assets/image-20250908092118582.png)

å‰æ‰æ¶ˆæ¯ç›’å­è®©å®ƒåœ¨åå°å®‰è£…æ¥ä¸‹æ¥å¦‚æ³•ç‚®åˆ¶å®‰è£…tomcat 

> ä¸ºä»€ä¹ˆè¦å®‰è£…tomcatå‘¢ springbootä¸æ˜¯å†…åµŒtomcatå—ä¸ºä»€ä¹ˆè¿˜è¦å®‰è£…ï¼Ÿ
>
> è¿™é‡Œä¹‹æ‰€ä»¥å®‰è£…tomcat æ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦jdk å®‰è£…å®å¡”Linuxä¸­çš„tomcatä¼šå¸®æˆ‘ä»¬jdk

![image-20250908092231178](assets/image-20250908092231178.png)

å®‰è£…tomcat

![image-20250908092614504](assets/image-20250908092614504.png)

å®‰è£…çš„è¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨xshellç™»å½•å®å¡”Linuxçœ‹çœ‹æœ‰æ²¡æœ‰jdk å¯ä»¥çœ‹åˆ°æ˜¯æ²¡æœ‰çš„ æ‰¾ä¸åˆ°è¯¥å‘½ä»¤
![image-20250908092852121](assets/image-20250908092852121.png)

 

å®‰è£…å®Œtomcatè¿‡åæˆ‘ä»¬å†å»æŸ¥çœ‹ å¯ä»¥çœ‹åˆ°å®ƒæœ‰äº†

![image-20250908093023688](assets/image-20250908093023688.png)





è¨€å½’æ­£ä¼  æˆ‘ä»¬å…ˆä»å‰ç«¯å¼€å§‹éƒ¨ç½²
![image-20250908093404256](assets/image-20250908093404256.png)

æ·»åŠ æˆåŠŸå ç‚¹å‡»å¹¶è¿›å…¥æ ¹ç›®å½•
![image-20250908093507234](assets/image-20250908093507234.png)

é€‰ä¸­å¹¶åˆ é™¤é»˜è®¤çš„æ–‡ä»¶
![image-20250908093610365](assets/image-20250908093610365.png)



å°†å‰ç«¯é¡¹ç›®distæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ä¸Šä¼ 

![image-20250908094030488](assets/image-20250908094030488.png)

![image-20250908094100274](assets/image-20250908094100274.png)

ä¸Šä¼ æˆåŠŸå ç›´æ¥è®¿é—® å‰ç«¯éƒ¨ç½²æˆåŠŸ ğŸ˜„
![image-20250908094211874](assets/image-20250908094211874.png)

å¦‚æœæƒ³æ”¹ngixné…ç½®æ–‡ä»¶ (tips: å®å¡”Linuxéƒ¨ç½²å¯ä»¥åœ¨è¿™æ·»åŠ nginxè·¨åŸŸé…ç½® è§£å†³è·¨åŸŸé—®é¢˜)
![image-20250908094526128](assets/image-20250908094526128.png)



å¼€å§‹éƒ¨ç½²åç«¯ åœ¨wwwrootç›®å½•ä¸‹æ–°å»ºuser-center-backendç›®å½•
![image-20250908094717273](assets/image-20250908094717273.png)

è¿›å…¥è¿™ä¸ªç›®å½• å°†æ‰“åŒ…å¥½çš„jaråŒ…æ”¾è¿›å»
![image-20250908094945254](assets/image-20250908094945254.png)

> æ³¨æ„å¯åŠ¨åç«¯é¡¹ç›®ä¹‹å‰çš„å…³é—­tomcatæœåŠ¡å™¨ ä¸ç„¶ç«¯å£ä¼šå†²çª é¡¹ç›®èµ·ä¸æ¥
> è¿™é‡Œå†ä¸€æ¬¡éªŒè¯æˆ‘ä»¬å…ˆå‰å®‰è£…tomcatåªæ˜¯ä¸ºäº†jdk ä¸ç„¶ä¹Ÿä¸ä¼šå…³é—­

![image-20250908095215112](assets/image-20250908095215112.png)

éƒ¨ç½²åç«¯é¡¹ç›®
![image-20250908100251430](assets/image-20250908100251430.png)

```bash
# æ³¨æ„åç«¯é¡¹ç›®è·¯å¾„æ˜¯å¦èƒ½åŒ¹é…çš„ä¸Š
/usr/bin/java -jar -Xmx1024M -Xms256M  /www/wwwroot/user-center-backend/user-center-0.0.1-SNAPSHOT.jar --spring.profiles.active=prod
```



æ”¾è¡Œç«¯å£
![image-20250909093725131](assets/image-20250909093725131.png)





æ·»åŠ æˆåŠŸè¿‡åè®¿é—® å…¬ç½‘ip+ç«¯å£8080 ğŸ˜„
![image-20250908100632479](assets/image-20250908100632479.png)



> è®¿é—®ä¸äº†è¿™ä¸€å—æˆ‘è¿˜æ²¡é‡åˆ°ä¸‹é¢æ˜¯å…¶ä»–äººé‡åˆ°ä¸èƒ½è®¿é—®çš„è§£å†³æ–¹æ¡ˆ

å‘ç°ipv4çš„8080ç«¯å£æ²¡æœ‰å¯åŠ¨
![image-20250908101414374](assets/image-20250908101414374.png)



ä¿®æ”¹springbootæœ¬åœ°é…ç½® é‡æ–°æ‰“åŒ…
![img](https://cdn.nlark.com/yuque/0/2022/png/25430380/1650793554786-e3ef9e64-e6b4-46d2-bcaa-6c26e6edb679.png)

æ”¾è¡Œå®å¡”8080ç«¯å£
![image-20250908101521801](assets/image-20250908101521801.png)

å†æ¬¡è¿›è¡Œè®¿é—® æˆåŠŸäº†
![image-20250908101556326](assets/image-20250908101556326.png)



### dockerå®‰è£…éƒ¨ç½²

docker æ˜¯å®¹å™¨ï¼Œå¯ä»¥å°†é¡¹ç›®çš„ç¯å¢ƒï¼ˆæ¯”å¦‚ javaã€nginxï¼‰å’Œé¡¹ç›®çš„ä»£ç ä¸€èµ·æ‰“åŒ…æˆé•œåƒï¼Œæ‰€æœ‰åŒå­¦éƒ½èƒ½ä¸‹è½½é•œåƒï¼Œæ›´å®¹æ˜“åˆ†å‘å’Œç§»æ¤ã€‚

å†å¯åŠ¨é¡¹ç›®æ—¶ï¼Œä¸éœ€è¦æ•²ä¸€å¤§å †å‘½ä»¤ï¼Œè€Œæ˜¯ç›´æ¥ä¸‹è½½é•œåƒã€å¯åŠ¨é•œåƒå°±å¯ä»¥äº†ã€‚

docker å¯ä»¥ç†è§£ä¸ºè½¯ä»¶å®‰è£…åŒ…ã€‚

![image-20250908103038095](assets/image-20250908103038095.png)

![image-20250908103106218](assets/image-20250908103106218.png)

åˆ¶ä½œé•œåƒ

> Dockerfile ç”¨äºæŒ‡å®šæ„å»º Docker é•œåƒçš„æ–¹æ³•
>
> Dockerfile ä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€è¦å®Œå…¨ä» 0 è‡ªå·±å†™ï¼Œå»ºè®®å» githubã€gitee ç­‰æ‰˜ç®¡å¹³å°å‚è€ƒåŒç±»é¡¹ç›®ï¼ˆæ¯”å¦‚ springbootï¼‰
>
> Dockerfile ç¼–å†™ï¼š
>
> - FROM ä¾èµ–çš„åŸºç¡€é•œåƒ
> - WORKDIR å·¥ä½œç›®å½•
> - COPY ä»æœ¬æœºå¤åˆ¶æ–‡ä»¶
> - RUN æ‰§è¡Œå‘½ä»¤
> - CMD / ENTRYPOINTï¼ˆé™„åŠ é¢å¤–å‚æ•°ï¼‰æŒ‡å®šè¿è¡Œå®¹å™¨æ—¶é»˜è®¤æ‰§è¡Œçš„å‘½ä»¤

##### åç«¯éƒ¨ç½²

ç›´æ¥ç”¨é±¼çš®çš„åç«¯DockerFile

```dockerfile
FROM maven:3.5-jdk-8-alpine AS builder

# Copy local code to the container image.
WORKDIR /app
COPY pom.xml .
COPY src ./src

# Build a release artifact.
RUN mvn package -DskipTests

# Run the web service on container startup.
CMD ["java","-jar","/app/target/user-center-0.0.1-SNAPSHOT.jar","--spring.profiles.active=prod"]

```

åç«¯é¡¹ç›®æ–°å»ºDockerfileæ–‡ä»¶
![image-20250908103735191](assets/image-20250908103735191.png)

åˆ‡æ¢åˆ°/www/wwwroot/ç›®å½•ä¸‹ æˆ‘è¿™é‡Œç›´æ¥æŠŠæœ¬åœ°çš„zipåŒ…ä¸Šä¼ ä¸Šå»è¿›è¡Œè§£å‹(ä¹Ÿå¯ä»¥ç”¨gitä»è¿œç¨‹ä»“åº“æ‹‰å–)
![image-20250908104031965](assets/image-20250908104031965.png)

è§£å‹å¹¶æŒ‡å®šæ–‡ä»¶å¤¹

![image-20250908104210248](assets/image-20250908104210248.png)

å°†è§£å‹åçš„user-centerç›®å½•ä¸‹çš„åç«¯é¡¹ç›®æ–‡ä»¶ç§»åŠ¨åˆ°user-center-backendç›®å½•ä¸‹ å¹¶åˆ é™¤user-centerç›®å½•![image-20250908104317997](assets/image-20250908104317997.png)

> è¿™é‡ŒDockerFileæ–‡ä»¶æ²¡æœ‰æ˜¯æˆ‘å¿˜è®°äº† åœ¨è¿™é‡Œæˆ‘å·²ç»æ‰‹åŠ¨ä¸Šä¼ Dockerfileåˆ°è¯¥ç›®å½•ä¸‹äº†



æ ¹æ®DockerFileåˆ¶ä½œé•œåƒ(è¿‡ç¨‹æ¯”è¾ƒæ¼«é•¿)
![image-20250908104952607](assets/image-20250908104952607.png)

```bash
# è¿™é‡Œçš„é•œåƒåä¸åšè¦æ±‚ å¯ä»¥è·ŸjaråŒ…ä¸ä¸€æ ·
docker build -t user-center-backend:v0.0.1 .

# docker build	æ„å»ºä¸€ä¸ª Docker é•œåƒ

# -t è¡¨ç¤ºç»™é•œåƒ æ‰“æ ‡ç­¾ï¼ˆtagï¼‰
# user-center â†’ é•œåƒåç§°
# v0.0.1 â†’ é•œåƒç‰ˆæœ¬ï¼ˆtag åç§°ï¼Œå¸¸ç”¨æ¥åŒºåˆ†ä¸åŒç‰ˆæœ¬ï¼‰
# å¦‚æœçœç•¥ :v0.0.1ï¼Œé»˜è®¤æ˜¯ :latestï¼Œå³ user-center:latestã€‚

# . è¡¨ç¤º å½“å‰ç›®å½•ä½œä¸ºæ„å»ºä¸Šä¸‹æ–‡
#Docker é»˜è®¤ä¼šåœ¨è¿™ä¸ªç›®å½•ä¸‹ æŸ¥æ‰¾ Dockerfile æ–‡ä»¶ä¹Ÿä¼šæŠŠè¿™ä¸ªç›®å½•é‡Œçš„æ–‡ä»¶ï¼ˆé™¤äº† .dockerignore é‡Œå¿½ç•¥çš„ï¼‰ä¸Šä¼ ç»™ Docker å¼•æ“ï¼Œåœ¨æ„å»ºè¿‡ç¨‹ä¸­ç”¨ COPYã€ADD ç­‰å‘½ä»¤å¼•ç”¨
```



##### å‰ç«¯éƒ¨ç½²

å‰ç«¯é¡¹ç›®DockerFileå’ŒNginx.conf(ç›´æ¥å¤åˆ¶é±¼çš®çš„)

```dockerfile
FROM nginx

WORKDIR /usr/share/nginx/html/
USER root

COPY ./docker/nginx.conf /etc/nginx/conf.d/default.conf

COPY ./dist  /usr/share/nginx/html/

EXPOSE 80

CMD ["nginx", "-g", "daemon off;"]
```

nginx.conf (è¿™ä¸ªæ”¾åœ¨ç”¨æˆ·ä¸­å¿ƒå‰ç«¯çš„dockeræ–‡ä»¶å¤¹ä¸‹)

```nginx
server {
    listen 80;

    # gzip config
    gzip on;
    gzip_min_length 1k;
    gzip_comp_level 9;
    gzip_types text/plain text/css text/javascript application/json application/javascript application/x-javascript application/xml;
    gzip_vary on;
    gzip_disable "MSIE [1-6]\.";

    root /usr/share/nginx/html;
    include /etc/nginx/mime.types;

    location / {
        try_files $uri /index.html;
    }
}
```



åœ¨å‰ç«¯é¡¹ç›®ä¸­æ–°å»ºDockerFileæ–‡ä»¶ å°†é…ç½®ç²˜è´´è¿‡å»
![image-20250908110153689](assets/image-20250908110153689.png)



æ–°å»ºDocker/nginx.conf å°†é…ç½®ç²˜è´´è¿‡å»

![image-20250908110315248](assets/image-20250908110315248.png)



å°†æ•´ä¸ªé¡¹ç›®æ‰“åŒ…ä¸Šä¼ åˆ°/www/wwwroot/user-center-frontendç›®å½•ä¸‹  ![image-20250908112053126](assets/image-20250908112053126.png)

çœç•¥è§£å‹è¿‡ç¨‹

æ„å»ºé•œåƒ
```bash 
docker build -t user-center-frontend:v0.0.1 .
```

![image-20250908112210999](assets/image-20250908112210999.png)

æŸ¥çœ‹é•œåƒ
![image-20250908112320101](assets/image-20250908112320101.png)

è¿è¡Œé•œåƒ
```bash
docker run -p 8080:8080 -d user-center-backend:v0.0.1
```

> åç«¯å¯åŠ¨ä¸èµ·æ¥å¯ä»¥é€šè¿‡docker ps -aæŸ¥çœ‹è¯¦ç»†ä¿¡æ¯



##### è¿è¡Œåç«¯å¯èƒ½å‘ç”Ÿçš„æŠ¥é”™åŠè§£å†³æ–¹æ³•

docker å¯åŠ¨åç«¯é•œåƒ

å†…å­˜ä¸è¶³
library initialization failed - unable to allocate file descriptor table - out of memoryexit status 139

è§£å†³æ–¹æ¡ˆ:https://blog.csdn.net/weixin_42241322/article/details/137122868





è§£å†³æ–¹æ¡ˆ 
```bash
systemctl restart docker
```



é”™è¯¯ä¿¡æ¯

```bash
[root@VM-12-12-opencloudos user-center-backend]# docker run -p 8080:8080 -t user-center-backend:v0.0.1
time="2025-09-08T20:54:48+08:00" level=error msg="Error waiting for container: driver failed programming external connectivity on endpoint unruffled_curie (5635228a998edf08f8de78bc4e0b49e6f299447bdcaa3d0254f05fe111d3becd): Unable to enable DNAT rule:  (iptables failed: iptables --wait -t nat -A DOCKER -p tcp -d 0/0 --dport 8080 -j DNAT --to-destination 172.17.0.2:8080 ! -i docker0: iptables: No chain/target/match by that name.\n (exit status 1))"
docker: Error response from daemon: driver failed programming external connectivity on endpoint unruffled_curie (5635228a998edf08f8de78bc4e0b49e6f299447bdcaa3d0254f05fe111d3becd): Unable to enable DNAT rule:  (iptables failed: iptables --wait -t nat -A DOCKER -p tcp -d 0/0 --dport 8080 -j DNAT --to-destination 172.17.0.2:8080 ! -i docker0: iptables: No chain/target/match by that name.
 (exit status 1))
```



##### dockerå‘½ä»¤

```bash
docker build æ„å»ºé•œåƒ
docker run å¯åŠ¨é•œåƒ
docker images æŸ¥çœ‹é•œåƒ
docker ps æŸ¥çœ‹é•œåƒè¿è¡ŒçŠ¶æ€ åŒ…å«å®¹å™¨ID
docker ps -a æŸ¥çœ‹é•œåƒè¯¦ç»†è¿è¡ŒçŠ¶æ€
docker rm åˆ é™¤å®¹å™¨
docker rmi åˆ é™¤é•œåƒ
docker logs å®¹å™¨ID å¯ä»¥æŸ¥çœ‹å½“å‰å®¹å™¨ è¢«è®¿é—®æ—¶é—´ è¢«å“ªä¸ªIPè®¿é—® ä»¥åŠè®¿é—®äº†å“ªäº›æ–‡ä»¶
docker run -p <å®¿ä¸»æœºç«¯å£>:<å®¹å™¨ç«¯å£> é•œåƒå
```





```dockerfile
FROM maven:3.5-jdk-8-alpine AS builder

# Copy local code to the container image.
WORKDIR /app
COPY pom.xml .
COPY src ./src

# Build a release artifact.
RUN mvn package -DskipTests

# Run the web service on container startup.
CMD ["java","-jar","/app/target/user-center-0.0.1-SNAPSHOT.jar","--spring.profiles.active=prod"]
```







# é¡¹ç›®éƒ¨ç½²ä¸Šçº¿æµç¨‹

## è·¨åŸŸé—®é¢˜è§£å†³<a name="cors">å…·ä½“è§£å†³æ–¹æ¡ˆ</a>



é±¼çš®nginxè·¨åŸŸé…ç½®(æˆ‘è¿™ä¸ªæ— æ³•é€šè¿‡Nginxè§£å†³è·¨åŸŸ)
```nginx
location ^~ /api/ {
      proxy_pass http://127.0.0.1:8080/api/;
      add_header 'Access-Control-Allow-Origin' $http_origin;
      add_header 'Access-Control-Allow-Credentials' 'true';
      add_header Access-Control-Allow-Methods 'GET, POST, OPTIONS';
      add_header Access-Control-Allow-Headers '*';
      if ($request_method = 'OPTIONS') {
          add_header 'Access-Control-Allow-Credentials' 'true';
          add_header 'Access-Control-Allow-Origin' $http_origin;
          add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS';
          add_header 'Access-Control-Allow-Headers' 'DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range';
          add_header 'Access-Control-Max-Age' 1728000;
          add_header 'Content-Type' 'text/plain; charset=utf-8';
          add_header 'Content-Length' 0;
          return 204;
      }
    }
```



æˆåŠŸè§£å†³è·¨åŸŸçš„nginxé…ç½®(å¯ä»¥è§£å†³æˆ‘çš„é—®é¢˜) è§£å†³å®å¡”Linuxéƒ¨ç½²è·¨åŸŸ
```nginx
location /api/ {
    proxy_pass http://127.0.0.1:8080/api/;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;

    # è·¨åŸŸ
    add_header Access-Control-Allow-Origin $http_origin always;
    add_header Access-Control-Allow-Credentials 'true' always;
    add_header Access-Control-Allow-Methods 'GET, POST, OPTIONS, PUT, DELETE' always;
    add_header Access-Control-Allow-Headers 'Content-Type, Authorization, X-Requested-With' always;

    # å¤„ç† OPTIONS é¢„æ£€
    if ($request_method = OPTIONS) {
         add_header 'Content-Type' 'text/plain; charset=utf-8';
          add_header 'Content-Length' 0;
        return 204;
    }
}
```



è§£å†³dockeréƒ¨ç½²è·¨åŸŸ

```nginx
root@326bb097a686:/usr/share/nginx/html# cat /etc/nginx/conf.d/default.conf 
server {
    listen 80;

    root /usr/share/nginx/html;
    include /etc/nginx/mime.types;

    location / {
        try_files $uri /index.html;
    }

    location /api/ {
        proxy_pass http://172.17.0.1:8080/api/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;

        add_header Access-Control-Allow-Origin $http_origin always;
        add_header Access-Control-Allow-Credentials 'true' always;
        add_header Access-Control-Allow-Methods 'GET, POST, OPTIONS, PUT, DELETE' always;
        add_header Access-Control-Allow-Headers 'Content-Type, Authorization, X-Requested-With' always;

        if ($request_method = OPTIONS) {
            return 204;
        }
    }
}
root@326bb097a686:/usr/share/nginx/html# nginx -s reload
2025/09/09 06:59:13 [notice] 85#85: signal process started
```



```nginx
cat > /etc/nginx/conf.d/default.conf << 'EOF'
server {
    listen 80;

    root /usr/share/nginx/html;
    include /etc/nginx/mime.types;

    location / {
        try_files $uri /index.html;
    }

    location /api/ {
    #proxy_pass http://127.0.0.1:8080/api/; è¿™é‡Œè¦æ›¿æ¢æˆdockerå®¹å™¨ä¸­çš„åœ°å€ é»˜è®¤ 172.17.0.1
    proxy_pass http://172.17.0.1:8080/api/;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;

    # è·¨åŸŸ
    add_header Access-Control-Allow-Origin $http_origin always;
    add_header Access-Control-Allow-Credentials 'true' always;
    add_header Access-Control-Allow-Methods 'GET, POST, OPTIONS, PUT, DELETE' always;
    add_header Access-Control-Allow-Headers 'Content-Type, Authorization, X-Requested-With' always;

    # å¤„ç† OPTIONS é¢„æ£€
    if ($request_method = OPTIONS) {
         add_header 'Content-Type' 'text/plain; charset=utf-8';
          add_header 'Content-Length' 0;
        return 204;
    }
	}
}
EOF
```





## è·¨åŸŸé—®é¢˜è§£å†³æ–¹å¼

1. å‰ç«¯æ”¹æˆè·Ÿåç«¯ä¸€æ ·çš„ç«¯å£ é€šè¿‡åœ°å€æ¥åŒºåˆ†å‰åç«¯é¡¹ç›®

2. é€šè¿‡é…ç½®Nginxæ¥è§£å†³Nginxè·¨åŸŸé—®é¢˜

3. åç«¯é€šè¿‡

    * @CrossOriginæ³¨è§£æ¥è§£å†³

    * å®ç°WebMvcConfigureræ¥å£ä¸­çš„addCorsMappingsæ–¹æ³•

    * é€šè¿‡ä½¿ç”¨ `CorsFilter`è¿‡æ»¤å™¨è§£å†³è·¨åŸŸ
      ```java
      import org.springframework.web.cors.CorsConfiguration;
      import org.springframework.web.cors.UrlBasedCorsConfigurationSource;
      import org.springframework.web.filter.CorsFilter;
      
      @Configuration
      public class GlobalCorsConfig {
      
          @Bean
          public CorsFilter corsFilter() {
              CorsConfiguration config = new CorsConfiguration();
              config.addAllowedOrigin("http://localhost:8080"); // å…è®¸çš„å‰ç«¯åŸŸ
              config.addAllowedHeader("*");                     // å…è®¸æ‰€æœ‰è¯·æ±‚å¤´
              config.addAllowedMethod("*");                     // å…è®¸æ‰€æœ‰è¯·æ±‚æ–¹æ³•
              config.setAllowCredentials(true);                 // å…è®¸æºå¸¦ Cookie
      
              UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
              source.registerCorsConfiguration("/**", config);
      
              return new CorsFilter(source);
          }
      }
      ```

      âš ï¸ æ³¨æ„ï¼š

      - `Access-Control-Allow-Origin` **ä¸èƒ½å†™ `\*`**ï¼Œå¦‚æœè¦æ”¯æŒ Cookieï¼Œéœ€è¦å†™å…·ä½“åŸŸåã€‚

â€‹	 ä¸‰ç§æ–¹å¼å¯¹æ¯”

| æ–¹å¼                               | ä½œç”¨èŒƒå›´               | ä¼˜ç‚¹                                  | ç¼ºç‚¹                                  |
| ---------------------------------- | ---------------------- | ------------------------------------- | ------------------------------------- |
| `@CrossOrigin`                     | å•ä¸ª Controller / æ–¹æ³• | ç®€å•çµæ´»ï¼Œé€‚åˆå±€éƒ¨                    | éœ€è¦ä¸€ä¸ªä¸ªåŠ ï¼Œéº»çƒ¦                    |
| `WebMvcConfigurer.addCorsMappings` | å…¨å±€                   | é…ç½®é›†ä¸­ï¼Œæ¨è                        | åœ¨æŸäº› Spring Security åœºæ™¯ä¸‹å¯èƒ½å¤±æ•ˆ |
| `CorsFilter`                       | å…¨å±€ï¼ˆè¿‡æ»¤å™¨å±‚ï¼‰       | ä¼˜å…ˆçº§æœ€é«˜ï¼Œèƒ½ä¸ Spring Security ååŒ | éœ€è¦å†™é¢å¤–çš„ Bean                     |





# é¡¹ç›®æ‰©å±•ç‚¹

![image-20250908203604214](assets/image-20250908203604214.png)





# bugæ€»ç»“ 

1. åç«¯è¿”å›çš„jsonæ•°æ®æ˜¾ç¤ºäº†åç«¯åˆ†å±‚ç»“æ„ **å¾…è§£å†³**
   ```json
   {
       "code": 50000,
       "data": null,
       "msg": "ç³»ç»Ÿé”™è¯¯",
       //description é—®é¢˜æ‰€åœ¨ com/jakie/usercenter/mapper/UserMapper.java æš´éœ²äº†åˆ†å±‚ç»“æ„ç»™å‰ç«¯
       "description": "nested exception is org.apache.ibatis.exceptions.PersistenceException: \r\n### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n### The error may exist in com/jakie/usercenter/mapper/UserMapper.java (best guess)\r\n### The error may involve com.jakie.usercenter.mapper.UserMapper.selectList\r\n### The error occurred while executing a query\r\n### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server."
   }
   ```

   > ä»€ä¹ˆå¯¼è‡´è¯¥é—®é¢˜å‘ç”Ÿï¼Ÿ
   >
   > â€‹	æœåŠ¡å™¨å…³é—­3306ç«¯å£ æ‰€å¯¼è‡´è¿æ¥å¤±è´¥ åç«¯è¿”å›ç»™å‰ç«¯çš„é”™è¯¯ä¿¡æ¯





# å¿ƒå¾— â­â­â­

è¿˜æœ‰å¾ˆé•¿ä¸€æ®µè·¯è¦èµ° æå‡ç©ºé—´å¾ˆå¤§

* ä¸€å®šã€ä¸€å®šã€ä¸€å®šè¦åœ¨æœ¬åœ°æµ‹è¯•å¥½åå†ä¸Šçº¿ â­â­â­

[#xxx]: 
